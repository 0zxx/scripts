#!/bin/bash

# Install dependencies
sudo apt-get update
sudo apt-get install -y ant openjdk-8-jdk libtomcat8-java libcommons-logging-java liblog4j1.2-java libgetopt-java libjbigi-jni libjbigi-java libjdom1-java libjetty9-java libjson-simple-java

# Download and extract i2p
wget https://github.com/i2p/i2p.i2p/archive/refs/tags/latest.tar.gz
tar -zxvf latest.tar.gz
cd i2p.i2p-*

# Build i2p
ant pkg

# Install i2p
sudo cp -r pkg/i2p /opt
sudo ln -s /opt/i2p/i2prouter /usr/bin/i2prouter

# Start i2p
i2prouter start

# Disable autostart on boot
sudo systemctl disable i2p.service
sudo systemctl disable i2prouter.service
